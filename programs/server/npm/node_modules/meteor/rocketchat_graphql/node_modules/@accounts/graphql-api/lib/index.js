!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babel-runtime/helpers/asyncToGenerator"),require("babel-runtime/regenerator"),require("babel-runtime/core-js/object/assign"),require("babel-runtime/helpers/defineProperty"),require("babel-runtime/helpers/extends")):"function"==typeof define&&define.amd?define(["babel-runtime/helpers/asyncToGenerator","babel-runtime/regenerator","babel-runtime/core-js/object/assign","babel-runtime/helpers/defineProperty","babel-runtime/helpers/extends"],t):"object"==typeof exports?exports["@accounts/graphql-api"]=t(require("babel-runtime/helpers/asyncToGenerator"),require("babel-runtime/regenerator"),require("babel-runtime/core-js/object/assign"),require("babel-runtime/helpers/defineProperty"),require("babel-runtime/helpers/extends")):e["@accounts/graphql-api"]=t(e["babel-runtime/helpers/asyncToGenerator"],e["babel-runtime/regenerator"],e["babel-runtime/core-js/object/assign"],e["babel-runtime/helpers/defineProperty"],e["babel-runtime/helpers/extends"])}(this,function(e,t,r,n,u){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={exports:{},id:n,loaded:!1};return e[n].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSAccountsContext=t.authenticated=t.createJSAccountsGraphQL=void 0;var n=r(19),u=r(3),o=r(20);t.createJSAccountsGraphQL=n.createJSAccountsGraphQL,t.authenticated=u.authenticated,t.JSAccountsContext=o.JSAccountsContext},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.authenticated=void 0;var u=r(2),o=n(u),a=r(4),s=n(a),i=r(1),c=n(i);t.authenticated=function(e,t){return function(){var r=(0,c.default)(o.default.mark(function r(n,u,a,i){var c,d;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(c=a.authToken,c&&""!==c&&null!==c){r.next=3;break}throw new Error("Unable to find authorization token in request");case 3:return r.next=5,e.resumeSession(c);case 5:if(d=r.sent,null!==d){r.next=8;break}throw new Error("Invalid or expired token!");case 8:return r.next=10,t(n,u,(0,s.default)(a,{user:d}),i);case 10:return r.abrupt("return",r.sent);case 11:case"end":return r.stop()}},r,void 0)}));return function(e,t,n,u){return r.apply(this,arguments)}}()}},function(e,t){e.exports=require("babel-runtime/core-js/object/assign")},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mutations="\n  loginWithPassword(user: UserInput!, password: String!): LoginReturn\n  refreshTokens(accessToken: String!, refreshToken: String!): LoginReturn\n  logout(accessToken: String!): Boolean\n  impersonate(accessToken: String! username: String!): ImpersonateReturn\n  createUser(user: CreateUserInput!): Boolean\n  verifyEmail(token: String!): Boolean\n  resetPassword(token: String!, newPassword: PasswordInput!): Boolean\n  sendVerificationEmail(email: String!): Boolean\n  sendResetPasswordEmail(email: String!): Boolean\n"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.queries="\n  me: User\n"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.typeDefs="\n  type Tokens {\n    refreshToken: String\n    accessToken: String\n  }\n  \n  type LoginReturn {\n    sessionId: String\n    user: User\n    tokens: Tokens\n  }\n  \n  type ImpersonateReturn {\n    authorized: Boolean\n    tokens: Tokens\n    user: User\n  }\n\n  type User {\n    id: ID!\n    email: String\n    username: String\n  }\n  \n  input UserInput {\n    id: ID\n    email: String\n    username: String\n  }\n  \n  input CreateUserInput {\n    username: String\n    email: String\n    password: String\n    profile: CreateUserProfileInput\n  }\n  \n  type PasswordType {\n    digest: String\n    algorithm: String\n  }\n  \n  input PasswordInput {\n    digest: String\n    algorithm: String\n  }\n  \n  input CreateUserProfileInput {\n    name: String\n    firstName: String\n    lastName: String\n  }\n"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createUser=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.createUser=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.user;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createUser(u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.impersonate=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.impersonate=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.accessToken,a=n.username;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.impersonate(u,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loginWithPassword=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.loginWithPassword=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.user,a=n.password;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loginWithPassword(u,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logout=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.logout=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.accessToken;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.logout(u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.me=void 0;var n=r(3);t.me=function(e){return(0,n.authenticated)(e,function(e,t,r){var n=r.user;return n})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTokens=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.refreshTokens=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.accessToken,a=n.refreshToken;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshTokens(u,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetPassword=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.resetPassword=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.token,a=n.newPassword;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.resetPassword(u,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendResetPasswordEmail=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.sendResetPasswordEmail=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.email;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendResetPasswordEmail(u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendVerificationEmail=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.sendVerificationEmail=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.email;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendVerificationEmail(u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.User={id:function(e){return e.id||e._id},email:function(e){return e.emails[0].address}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.verifyEmail=void 0;var u=r(2),o=n(u),a=r(1),s=n(a);t.verifyEmail=function(e){return function(){var t=(0,s.default)(o.default.mark(function t(r,n){var u=n.token;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.verifyEmail(u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createJSAccountsGraphQL=void 0;var u=r(4),o=n(u),a=r(22),s=n(a),i=r(21),c=n(i),d=r(10),f=r(13),l=r(9),p=r(12),m=r(17),v=r(5),b=r(7),h=r(6),y=r(11),g=r(8),_=r(14),w=r(15),x=r(16),P=r(18);t.createJSAccountsGraphQL=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{rootQueryName:"Query",rootMutationName:"Mutation",extend:!0,withSchemaDefinition:!1},n="\n  "+b.typeDefs+"\n\n  "+(r.extend?"extend ":"")+"type "+r.rootQueryName+" {\n    "+h.queries+"\n  }\n\n  "+(r.extend?"extend ":"")+"type "+r.rootMutationName+" {\n    "+v.mutations+"\n  }\n\n  "+(r.withSchemaDefinition?"schema {\n    query: "+r.rootMutationName+"\n    mutation: "+r.rootQueryName+"\n  }":"")+"\n  ",u=(t={User:m.User},(0,c.default)(t,r.rootMutationName,{loginWithPassword:(0,d.loginWithPassword)(e),refreshTokens:(0,f.refreshTokens)(e),logout:(0,y.logout)(e),impersonate:(0,l.impersonate)(e),createUser:(0,g.createUser)(e),resetPassword:(0,_.resetPassword)(e),sendResetPasswordEmail:(0,w.sendResetPasswordEmail)(e),sendVerificationEmail:(0,x.sendVerificationEmail)(e),verifyEmail:(0,P.verifyEmail)(e)}),(0,c.default)(t,r.rootQueryName,{me:(0,p.me)(e)}),t);return{schema:n,extendWithResolvers:function(e){var t;return(0,s.default)({},e,(t={},(0,c.default)(t,r.rootMutationName,(0,o.default)(e[r.rootMutationName]||{},u[r.rootMutationName])),(0,c.default)(t,r.rootQueryName,(0,o.default)(e[r.rootQueryName]||{},u[r.rootQueryName])),(0,c.default)(t,"User",(0,o.default)(e.User||{},u.User)),t))}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.JSAccountsContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Authorization";return{authToken:e.headers[t]||e.headers[t.toLowerCase()]}}},function(e,t){e.exports=require("babel-runtime/helpers/defineProperty")},function(e,t){e.exports=require("babel-runtime/helpers/extends")}])});